{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="au theme template">
    <meta name="author" content="Hau Nguyen">
    <meta name="keywords" content="au theme template">

    <!-- Title Page-->
    <title>Login</title>

    <!-- Fontfaces CSS-->
    <link href="{% static 'css/font-face.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/font-awesome-4.7/css/font-awesome.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/font-awesome-5/css/fontawesome-all.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/mdi-font/css/material-design-iconic-font.min.css' %}" rel="stylesheet" media="all">

    <!-- Bootstrap CSS-->
    <link href="{% static 'vendor/bootstrap-4.1/bootstrap.min.css' %}" rel="stylesheet" media="all">

    <!-- Vendor CSS-->
    <link href="{% static 'vendor/animsition/animsition.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/bootstrap-progressbar/bootstrap-progressbar-3.3.4.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/wow/animate.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/css-hamburgers/hamburgers.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/slick/slick.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/select2/select2.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/perfect-scrollbar/perfect-scrollbar.css' %}" rel="stylesheet" media="all">

    <!-- Main CSS-->
    <link href="{% static 'css/theme.css' %}" rel="stylesheet" media="all">
    <style>
        .bg{
            background-color: #20c4cc;
            /*background-color: rgb(43, 114, 227)*/

        }
        .login_box{
                    border: 2px solid rgb(43, 114, 227);
                    /*background-color:antiquewhite;*/
                    box-shadow: 0 8px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        }
        input {
                border: 1px solid black !important;
                padding:0;

        }
        label{
               color:black;
               /*font-weight: bold;*/
        }
    </style>

</head>

<body >
    <div class="page-wrapper bg ">
        <div class="page-content--bge5 bg">
            <div class="container bg">
                <div class="login-wrap">
                    <div class="login-content login_box">
                        <div class="login-logo">
                            <a href="#">
<!--                                <img src="images/icon/logo.png" alt="CoolAdmin">-->
                                <h4>COMPANY LOGIN</h4>
                            </a>
                        </div>

                <div class="login-form">
                    <div class="container">
                            <form action="" method="post">
<!--                                <div class="row">-->
                                 {% csrf_token %}

                <div class="form-group d-flex align-items-center mb-3">
                <label class="col-5">Co ID </label>
                <div class="col-4">
<!--                    <input class="form-control" type="text" name="co_id">-->
                    <select class="form-control" name="company_id" id="company_id_select" required>
                        <option value="">Select Company</option>
                        {% for company in companies %}
                               <option value="{{ company.company_id }}" data-name="{{ company.companyname }}">
                                {{ company.company_id }}
                                </option>
<!--                        <option value="{{ company.company_id }}">{{ company.company_id }} </option>-->
                         {% endfor %}
                    </select>
                </div>
                </div>

                <div class="form-group d-flex align-items-center mb-3">
                <label class="col-5">Name</label>
                <div class="col">
                    <input class="form-control" type="text" name="name" id="company_name_input" readonly>
<!--                    <select class="" name="name" style="padding: 0px;">-->
<!--                    <option value="">Select Name</option>-->
<!--                    <option value="option1">Option 1</option>-->
<!--                    <option value="option2">Option 2</option>-->
<!--                    <option value="option3">Option 3</option>-->
<!--                    </select>-->
                </div>
                </div>

<!--                <div class="form-group d-flex align-items-center mb-3">-->
<!--                <label class="col-5">Branch </label>-->
<!--                <div class="col-5">-->
<!--&lt;!&ndash;                    <input class="form-control" type="text" name="branch_id" >&ndash;&gt;-->
<!--                     <select class="form-control" name="branch"  required>-->
<!--                        <option value="">Select branch</option>-->
<!--                        {% for branch in branchs %}-->
<!--                               <option value="{{ branch.branch_name }}" >-->
<!--                                {{  branch.branch_name}}-->
<!--                                </option>-->
<!--&lt;!&ndash;                        <option value="{{ company.company_id }}">{{ company.company_id }} </option>&ndash;&gt;-->
<!--                         {% endfor %}-->
<!--                    </select>-->
<!--                </div>-->
<!--                </div>-->
                                  <!-- Branch Dropdown -->
    <div class="form-group d-flex align-items-center mb-3">
        <label class="col-5">Branch</label>
        <div class="col-5">
            <select class="form-control" name="branch" id="branch_select" required>
                <option value="">Select branch</option>
            </select>
        </div>
    </div>

                <div class="form-group d-flex align-items-center mb-3">
                <label class="col-5">Financial Year</label>
                <div class="col">
<!--                    <input class="form-control" type="text" name="date" >-->
                    <select class="form-control" name="fycode" required>
                        <option value="">Select year</option>
                        {% for fyear in fyears %}
                               <option value="{{ fyear.fycode }}" >
                                {{ fyear.fycode  }}
                                </option>

                         {% endfor %}
                    </select>
                </div>
                </div>

                                <div class="d-flex align-items-center">
                                    <div class="col-md-3"></div>
                                    <div class="col-md-6 col-12">
                                <button class="btn btn-primary" type="submit">Login</button>
                                <a href="{% url 'main:index' %}" class="btn btn-primary">Cancel</a>
                                        </div>
                                </div>

                            </form>
                        </div>
<!--                            <div class="register-link">-->
<!--                                <p>-->
<!--                                    Don't you have account?-->
<!--                                    <a href="#">Sign Up Here</a>-->
<!--                                </p>-->
<!--                            </div>-->
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
<script>
    document.getElementById('company_id_select').addEventListener('change', function () {
        var selectedOption = this.options[this.selectedIndex];
        var companyName = selectedOption.getAttribute('data-name');
        document.getElementById('company_name_input').value = companyName || '';
    });
</script>
    <!-- Jquery JS-->
    <script src="{% static 'vendor/jquery-3.2.1.min.js' %}"></script>
    <script>
    // Populate branch dropdown based on selected company
    $('#company_id_select').change(function () {
        const companyId = $(this).val();
        const companyName = $('#company_id_select option:selected').data('name');
        $('#company_name_input').val(companyName || '');

        $('#branch_select').empty().append('<option value="">Loading...</option>');
        if (companyId) {
            $.ajax({
                url: "{% url 'main:get_branches' %}",
                data: { company_id: companyId },
                success: function (data) {
                    $('#branch_select').empty().append('<option value="">Select branch</option>');
                    data.forEach(branch => {
                        $('#branch_select').append(`<option value="${branch.branch_name}">${branch.branch_name}</option>`);
                    });
                }
            });
        } else {
            $('#branch_select').empty().append('<option value="">Select branch</option>');
        }
    });
</script>

    <!-- Bootstrap JS-->
    <script src="{% static 'vendor/bootstrap-4.1/popper.min.js' %}"></script>
    <script src="{% static 'vendor/bootstrap-4.1/bootstrap.min.js' %}"></script>
    <!-- Vendor JS       -->
    <script src="{% static 'vendor/slick/slick.min.js' %}">
    </script>
    <script src="{% static 'vendor/wow/wow.min.js' %}"></script>
    <script src="{% static 'vendor/animsition/animsition.min.js' %}"></script>
    <script src="{% static 'vendor/bootstrap-progressbar/bootstrap-progressbar.min.js' %}">
    </script>
    <script src="{% static 'vendor/counter-up/jquery.waypoints.min.js' %}"></script>
    <script src="{% static 'vendor/counter-up/jquery.counterup.min.js' %}">
    </script>
    <script src="{% static 'vendor/circle-progress/circle-progress.min.js' %}"></script>
    <script src="{% static 'vendor/perfect-scrollbar/perfect-scrollbar.js' %}"></script>
    <script src="{% static 'vendor/chartjs/Chart.bundle.min.js' %}"></script>
    <script src="{% static 'vendor/select2/select2.min.js' %}">
    </script>

    <!-- Main JS-->
    <script src="{% static 'js/main.js' %}"></script>

</body>

</html>
<!-- end document-->