{% extends "base.html" %}
{% load static %}
{% block content %}
<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirm Delete</title>
    <!-- Fontfaces CSS-->
    <link href="{% static 'css/font-face.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/font-awesome-4.7/css/font-awesome.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/font-awesome-5/css/fontawesome-all.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/mdi-font/css/material-design-iconic-font.min.css' %}" rel="stylesheet" media="all">

    <!-- Bootstrap CSS-->
    <link href="{% static 'vendor/bootstrap-4.1/bootstrap.min.css' %}" rel="stylesheet" media="all">

    <!-- Vendor CSS-->
    <link href="{% static 'vendor/animsition/animsition.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/bootstrap-progressbar/bootstrap-progressbar-3.3.4.min.css' %}" rel="stylesheet"
          media="all">
    <link href="{% static 'vendor/wow/animate.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/css-hamburgers/hamburgers.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/slick/slick.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/select2/select2.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/perfect-scrollbar/perfect-scrollbar.css' %}" rel="stylesheet" media="all">

    <!-- Main CSS-->
    <link href="{% static 'css/theme.css' %}" rel="stylesheet" media="all">
    <style>
         body {
            font-family: Arial, sans-serif;
            margin: 20px;

        }
         .logo p {
        color:white;
        }
        .container {
            border: 1px solid rgb(43, 114, 227);
            padding: 20px;
            width: 50%;
            border-radius: 5px;
            background:#f5f5f5;
            margin-top:80px;
        }
        .btn {
            margin-top: 10px;
            display: inline-block;
            padding: 8px 15px;
            text-decoration: none;
            border-radius: 4px;
            color: white;
        }
        .delete-btn { background-color: #dc3545; }
        .cancel-btn { background-color: #007bff; }
        .trip_heading{
            margin-bottom: 100px;
        }
        .trip_date{
            margin-bottom: 100px;
        }
        input{
            border:1px solid black;
        }

    </style>


<div class="container">
   <form method="get" action="{% url 'main:trip_sheets_customer_loading_date' %}">
    <h4 class="trip_heading">Customer wise trip sheet details</h4>
    <label>Customer</label>&nbsp;
    <input type="text" style="width: 20%;" id="customer_code"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
    <label> Name:</label>&nbsp;
    <input type="text" name="customer" style="width: 40%;" id="customer_input" list="customer_list">
    <datalist id="customer_list"></datalist>
    <label> Date from:</label>
    <input type="date" name="trip_date_from"  value="{{ request.GET.trip_date_from|default:today }}" required>
    <label> Date to:</label>
    <input type="date" name="trip_date_to" required class="trip_date" value="{{ request.GET.trip_date_to|default:today }}">
    <br>
    <button type="submit" class="btn cancel-btn ">Search</button>
    <a href="{% url 'main:index' %}" class="btn cancel-btn">Back</a>
</form>
</div>
<!--</div>-->
<!--</div>-->
<!-- Jquery JS-->
 <script>
document.getElementById('customer_input').addEventListener('input', function () {
    const query = this.value;
    if (query.length < 2) return;  // Start suggesting after 2 characters

    fetch(`/get-customers/?q=${encodeURIComponent(query)}`)
        .then(response => response.json())
        .then(data => {
            const datalist = document.getElementById('customer_list');
            datalist.innerHTML = ''; // Clear previous results

            data.forEach(item => {
                const option = document.createElement('option');
                option.value = item.name;
                option.dataset.code = item.account_code;
                datalist.appendChild(option);
            });
        });
});

document.getElementById('customer_input').addEventListener('change', function () {
    const datalist = document.getElementById('customer_list').children;
    const inputVal = this.value;
    for (const option of datalist) {
        if (option.value === inputVal) {
            document.getElementById('customer_code').value = option.dataset.code;
            break;
        }
    }
});
</script>

<script src="{% static 'vendor/jquery-3.2.1.min.js' %}"></script>
<!-- Bootstrap JS-->
<script src="{% static 'vendor/bootstrap-4.1/popper.min.js' %}"></script>
<script src="{% static 'vendor/bootstrap-4.1/bootstrap.min.js' %}"></script>
<!-- Vendor JS       -->
<script src="{% static 'vendor/slick/slick.min.js' %}">
</script>
<script src="{% static 'vendor/wow/wow.min.js' %}"></script>
<script src="{% static 'vendor/animsition/animsition.min.js' %}"></script>
<script src="{% static 'vendor/bootstrap-progressbar/bootstrap-progressbar.min.js' %}">
</script>
<script src="{% static 'vendor/counter-up/jquery.waypoints.min.js' %}"></script>
<script src="{% static 'vendor/counter-up/jquery.counterup.min.js' %}">
</script>
<script src="{% static 'vendor/circle-progress/circle-progress.min.js' %}"></script>
<script src="{% static 'vendor/perfect-scrollbar/perfect-scrollbar.js' %}"></script>
<script src="{% static 'vendor/chartjs/Chart.bundle.min.js' %}"></script>
<script src="{% static 'vendor/select2/select2.min.js' %}">
</script>

<!-- Main JS-->
<script src="{% static 'js/main.js' %}"></script>
{% endblock %}
<!--</body>-->

<!--</html>-->
